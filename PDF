
npm install pdfjs-dist
npm install @types/pdfjs-dist
import { PDFDocument, PDFPageProxy } from 'pdfjs-dist';

// Load the PDF worker from pdfjs-dist/build/pdf.worker.entry
import pdfWorker from 'pdfjs-dist/build/pdf.worker.entry';

// Register the PDF worker
PDFDocument.worker = pdfWorker;

// Function to convert PDF to HTML
async function convertPDFToHTML(pdfPath: string): Promise<string> {
  // Load the PDF document
  const loadingTask = PDFDocument.load(pdfPath);
  const pdf = await loadingTask.promise;

  // Convert each page to HTML
  const htmlPages = await Promise.all(
    Array.from({ length: pdf.numPages }, async (_, index) => {
      const page: PDFPageProxy = await pdf.getPage(index + 1);
      const content: any = await page.getTextContent();
      return content.items
        .map((item: any) => `<span style="left:${item.transform[4]}px; top:${item.transform[5]}px;">${item.str}</span>`)
        .join('');
    })
  );

  // Convert text content to HTML
  const html = htmlPages.join('<br>');

  return html;
}

// Usage
const pdfPath = 'path/to/input.pdf';
convertPDFToHTML(pdfPath)
  .then(html => {
    // HTML conversion completed
    console.log(html);
    // Do something with the HTML
  })
  .catch(error => {
    console.error('Error converting PDF to HTML:', error);
  });


