import * as fs from 'fs';
import * as https from 'https';

const url: string = 'https://example.com/file.txt';
const filePath: string = '/path/to/save/file.txt';
const username: string = 'your_username';
const password: string = 'your_password';

const options: https.RequestOptions = {
  headers: {
    'Authorization': 'Basic ' + Buffer.from(username + ':' + password).toString('base64')
  }
};

const file: fs.WriteStream = fs.createWriteStream(filePath);
https.get(url, options, (response: https.IncomingMessage) => {
  response.pipe(file);
  file.on('finish', () => {
    file.close();
    console.log(`File downloaded to ${filePath}`);
  });
}).on('error', (err: Error) => {
  fs.unlink(filePath, () => {});
  console.error(`Error downloading file: ${err}`);
});





import axios from 'axios';
import fs from 'fs';

const downloadFile = async (url: string, username: string, password: string, outputPath: string) => {
  try {
    const response = await axios.get(url, {
      responseType: 'stream',
      auth: {
        username: username,
        password: password
      }
    });

    const writeStream = fs.createWriteStream(outputPath);
    response.data.pipe(writeStream);

    return new Promise((resolve, reject) => {
      writeStream.on('finish', resolve);
      writeStream.on('error', reject);
    });
  } catch (error) {
    console.error(error);
  }
};

// Example usage:
downloadFile('http://example.com/file.ext', 'username', 'password', './output/filename.ext');
